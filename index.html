<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<title>Test Map</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body>
	<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=3d99118be6f66b213e232f75ada21ada"></script>
	<script type="text/javascript" src="daumApi.js"></script>

	<div id="mapwrap">
   	<!-- 지도가 표시될 div -->
    <div id="map" style="width:100%;height:500px;"></div>
	    <!-- 지도 위에 표시될 마커 카테고리 -->
	    <div class="category">
	        <ul>
	            <li id="skateMenu" class="menu_selected" onclick="changeMarker('skate')">
            	    <span class="ico_comm ico_skate"></span>
                	스케이트보드
		        </li>
	            <li id="basketMenu" onclick="changeMarker('basket')">
               		<span class="ico_comm ico_basket"></span>
                	농구
		        </li>
				<li id="allMenu" onclick="changeMarker('all')">
               		<span class="ico_comm ico_all"></span>
                	모두표시
		        </li>
	        </ul>
    </div>
	</div>
	<button id="setMarker" class="mapButton" type="button" style="position:absolute; top:510px;">중앙에 마커표시</button>
	<button id="setGeolocation" class="mapButton" type="button" style="position:absolute; top:510px; left:150px">내위치</button>
	<button id="setArea" class="mapButton" type="button" style="position:absolute; top:510px; left:290px;">장소설정</button>
	<button id="createPolyline" class="mapButton" type="button" style="position:absolute; top:510px; left:290px; display:none;">확인</button>
	<div id="result" style="width:100%;"></div>
	<script>

		// 지도를 생성합니다.
		var map = map_initialize();
		geoLocation();

		// 마커를 생성합니다.
		var type = 'skate';
		var skateMarkers = [];
		var basketMarkers = [];
		var areaMarkers = [];

		//var typeList = ['skate', 'basket']; //마커 종류 추가시 배열에도 추가해주세요.
		//var typeSet = ['skate': skateMarkers,'bastet': basketMarkers];

		loadMarkers('skate', skateMarkers);
		loadMarkers('basket', basketMarkers);

		//setSkateMarkers(map);
		//setBasketMarkers(map);

		document.getElementById("setMarker").addEventListener("click", function() {
			iwContent = '<div style="padding:5px;">Hello World!</div>'; // 인포윈도우에 표출될 내용으로 HTML 문자열이나 document element가 가능합니다
			addMarker(map.getCenter(), iwContent);
		});

		document.getElementById("setGeolocation").addEventListener("click", geoLocation);
		document.getElementById("setArea").addEventListener("click", function() {
			changeMarker("area");
			document.getElementById("setArea").style.display = 'none';
			document.getElementById("createPolyline").style.display = 'inline';
		});
		document.getElementById("createPolyline").addEventListener("click", function() {
			var polygonPath = [];
			for (marker in areaMarkers) {
				polygonPath.push(marker.position);
			}
			var polygon = new daum.maps.Polygon({
    		path:polygonPath, // 그려질 다각형의 좌표 배열입니다
    		strokeWeight: 3, // 선의 두께입니다
    		strokeColor: '#39DE2A', // 선의 색깔입니다
    		strokeOpacity: 0.8, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
    		strokeStyle: 'longdash', // 선의 스타일입니다
    		fillColor: '#A2FF99', // 채우기 색깔입니다
    		fillOpacity: 0.7 // 채우기 불투명도 입니다
			});
			// 지도에 다각형을 표시합니다
			polygon.setMap(map);
		});

		// 지도에 클릭 이벤트를 등록합니다
		daum.maps.event.addListener(map, 'click', function(mouseEvent) {
			// 클릭한 위도, 경도 정보를 가져옵니다
			var latlng = mouseEvent.latLng;
			// 마커 위치를 클릭한 위치로 옮깁니다
			iwContent = '<div style="padding:5px;">Hello World!</div>'; // 인포윈도우에 표출될 내용으로 HTML 문자열이나 document element가 가능합니다
			addMarker(latlng, iwContent);
		});
	</script>

</body>
</html>
